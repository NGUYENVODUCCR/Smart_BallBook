<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Voice Recognition</title>
  </head>

  <body>
    <script>
      const SpeechRecognition =
        window.SpeechRecognition || window.webkitSpeechRecognition;

      const recognition = new SpeechRecognition();
      recognition.lang = "vi-VN";
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      // Khi React Native gá»­i message START
      document.addEventListener("message", (event) => {
        if (event.data === "START") {
          recognition.start();
        }
      });

      recognition.onresult = (event) => {
        const text = event.results[0][0].transcript;
        window.ReactNativeWebView.postMessage(
          JSON.stringify({ type: "RESULT", text })
        );
      };

      recognition.onerror = (err) => {
        window.ReactNativeWebView.postMessage(
          JSON.stringify({ type: "ERROR", error: err.error })
        );
      };
    </script>
  </body>
</html>
